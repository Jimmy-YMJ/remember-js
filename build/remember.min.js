!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Remember=e()}}(function(){return function e(t,n,o){function i(r,u){if(!n[r]){if(!t[r]){var c="function"==typeof require&&require;if(!u&&c)return c(r,!0);if(s)return s(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var f=n[r]={exports:{}};t[r][0].call(f.exports,function(e){var n=t[r][1][e];return i(n?n:e)},f,f.exports,e,t,n,o)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(e,t,n){"use strict";t.exports=e("./lib/Remember")},{"./lib/Remember":3}],2:[function(e,t,n){"use strict";function o(){this.store={}}o.prototype={getItem:function(e){return this.store[e]},setItem:function(e,t){this.store[e]=t}},t.exports=o},{}],3:[function(e,t,n){"use strict";function o(e){this.options=e||{},this.inSequence=e.inSequence||!1,this.rememberQueue=new s(e.storageId||r,e.storage),this.onConsumingComplete=e.onConsumingComplete}function i(e){for(var t=e.length,n=[];t--;)n.unshift(e[t]);return n}var s=e("./Storage"),r="#REMEMBER_JS_REMEMBER_QUEUE";o.prototype={registerAction:function(e,t){this.actions=this.actions||{},this.actions[e]=t},set:function(e){o.call(this,Object.assign(this.options,e))},_remember:function(e){this.rememberQueue.push(e)},_next:function(){this.rememberQueue.shift(),"number"==typeof this.consumeCount&&this.consumeCount++,this._consumeInSequence()},do:function(e,t,n,o,s,r,u){var c=i(arguments);this.inSequence?(this._remember(c),this._consumeInSequence()):this._doAction.apply(this,c)},_doAction:function(e,t,n,o,s,r,u){var c=this.actions[e],h=i(arguments);c(this._remember.bind(this,h),t,n,o,s,r,u)},_doActionInSequence:function(e,t,n,o,i,s,r){var u=this.actions[e];u(this._next.bind(this),t,n,o,i,s,r)},_consumeInSequence:function(){this.rememberQueue.getLength()?this._doActionInSequence.apply(this,this.rememberQueue.peek()):"number"==typeof this.consumeCount&&(this.consumeCount&&"function"==typeof this.onConsumingComplete&&this.onConsumingComplete(this.consumeCount),this.consumeCount=void 0)},_consume:function(){for(var e=this.rememberQueue.getLength(),t=0;t<e;t++)this._doAction.apply(this.rememberQueue.shift())},consume:function(){this.inSequence?(this.consumeCount=0,this._consumeInSequence()):this._consume()},clear:function(){this.rememberQueue.clear()}},t.exports=o},{"./Storage":4}],4:[function(e,t,n){"use strict";function o(e,t){if(this.storeId=e,t=t||new i,!t||"function"!=typeof t.getItem||"function"!=typeof t.setItem)throw new Error("The storage must have both getItem and setItem method.");this.store=t}var i=e("./MemoryStorage");o.prototype={push:function(e){var t=this._getStoredData();return t.push(e),this._saveDataToStore(t),t.length},peek:function(e){e=e||0;var t=this._getStoredData();return t[e]},shift:function(){var e=this._getStoredData(),t=e.shift();return this._saveDataToStore(e),t},getLength:function(){return this._getStoredData().length},clear:function(){this._saveDataToStore([])},_getStoredData:function(){return JSON.parse(this.store.getItem(this.storeId)||JSON.stringify(""))||[]},_saveDataToStore:function(e){this.store.setItem(this.storeId,JSON.stringify(e))}},t.exports=o},{"./MemoryStorage":2}]},{},[1])(1)});